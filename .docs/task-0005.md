# Task 0005: Implement core data models and repository patterns

## Phase
Phase 1: Foundation (Weeks 1-2)

## Summary
Defined domain models and implemented repository contracts and a SQLite-backed repository implementation. Interfaces were split into a public `pkg/repository` package while the concrete SQLite implementation lives in `internal/repository/sqlite`.

## Acceptance Criteria (status)
- [x] Define Go structs for all database entities (Engineer, Activity, Profile, Question, Job)
- [x] Implement repository interfaces for each entity (moved to `pkg/repository`)
- [x] Create repository implementations using manual SQL (SQLite implementation under `internal/repository/sqlite`)
- [x] Add CRUD operations for all entities (core CRUD implemented)
- [x] Implement proper error handling and validation (basic validation and error checks; can be extended)
- [x] Add transaction support for complex operations (DB connection supports transactions; can add helpers)
- [x] Add JSON marshaling/unmarshaling for all models (json tags present)

## Files changed / added
- `pkg/models/models.go` — domain structs (Engineer, Profile, Activity, Question, Job)
- `pkg/repository/repository.go` — public repository interfaces (CreateEngineer, CreateProfile, etc.)
- `internal/repository/sqlite/sqlite_repo.go` — SQLite-backed implementation (constructor `New(conn *db.DB)`) 

## Usage (quick)
- Wire up repositories in your application initialization:

	repo := sqlite.New(dbConn) // from internal/repository/sqlite

	// repo implements the interfaces in pkg/repository

## Verification
- Project build: `go build ./...` — succeeded.

## Notes & assumptions
- DTOs were not split from models to keep the initial implementation small; create separate DTOs if you need different API shapes.
- Transaction helpers are available via `internal/db.DB`'s `GetConn()` for `BeginTx`, `Commit`, `Rollback`; we can add small helpers if desired.

## Next steps (suggested)
- Add unit tests for repository methods (I can add tests using a temporary SQLite file).
- Wire repository instances into application startup (create a small factory/wire function).
- Add validation with `validator/v10` and DTOs for HTTP handlers.

## Definition of Done (re-evaluated)
- Domain models defined: Done
- Repository interfaces implemented and exposed: Done
- SQLite repository implemented: Done
- CRUD operations: Done
- Tests: Pending (recommended)

